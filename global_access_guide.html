<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DCS/OBS Controller - グローバル環境での使用ガイド</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .warning {
            background-color: #ffeeee;
            border-left: 4px solid #ff3333;
            padding: 15px;
            margin: 20px 0;
        }
        code, pre {
            background-color: #f5f5f5;
            border-radius: 3px;
            padding: 2px 5px;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
        }
        pre {
            padding: 10px;
            overflow-x: auto;
        }
        .emoji {
            font-size: 1.2em;
        }
        .note {
            background-color: #ffffee;
            border-left: 4px solid #ffcc00;
            padding: 15px;
            margin: 20px 0;
        }
        .button {
            display: inline-block;
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            border-radius: 5px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="warning">
        <h2>⚠️ セキュリティに関する重要な注意事項</h2>
        <p><strong>このツールをグローバル環境（インターネット上）で使用する場合の警告：</strong></p>
        <ul>
            <li>このアプリケーションは、PCへの<strong>完全なキーボード制御権</strong>を外部に公開するものです</li>
            <li>設定を誤ると、<strong>インターネット上の誰でもあなたのPCを操作できる状態</strong>になります</li>
            <li>これにより<strong>重大なセキュリティホール</strong>が発生する可能性があります</li>
            <li>開発者(BLUE)は、グローバル環境での使用によって生じたいかなる問題・損害についても<strong>一切の責任を負いません</strong></li>
            <li>このガイドに従って設定する場合は、<strong>すべて自己責任</strong>で行ってください</li>
        </ul>
    </div>

    <h1>📱 DCS/OBS Controller</h1>

    <p>DCS World等のゲームやOBSをスマホから遠隔操作するためのシンプルなWebアプリケーション</p>

    <h2>🎯 このアプリでできること</h2>
    
    <ul>
        <li><strong>スマホがゲームパッドに変身</strong>：DCS Worldなどのゲームをスマホから操作</li>
        <li><strong>OBSを遠隔操作</strong>：録画開始/停止、シーン切替をスマホから</li>
        <li><strong>自由にカスタマイズ</strong>：好きなボタンを好きな配置で作成可能</li>
    </ul>

    <h2>📋 必要なもの</h2>

    <h3>✅ 準備するもの</h3>
    <ul>
        <li><strong>Windows PC</strong>（Windows 10/11）</li>
        <li><strong>スマホ</strong>（iPhone/Android どちらでもOK）</li>
        <li><strong>同じWi-Fi</strong>（PCとスマホが同じネットワークに接続）</li>
    </ul>

    <h3>📥 インストールが必要なもの</h3>
    <ul>
        <li><strong>Python 3.10 ～ 3.12</strong>（無料）</li>
        <li><strong>このアプリ</strong>（ZIPファイルまたはgitクローン）</li>
    </ul>

    <div class="note">
        <p><strong>⚠️ Python バージョンについて</strong></p>
        <ul>
            <li><strong>推奨</strong>: Python 3.10、3.11、3.12</li>
            <li><strong>非推奨</strong>: Python 3.14（最新すぎて一部ライブラリが未対応）</li>
        </ul>
    </div>

    <h2>🚀 セットアップ手順</h2>

    <h3>ステップ1: Pythonをインストール</h3>

    <h4>方法A: 公式サイトからインストール（推奨）</h4>
    <ol>
        <li><strong>Pythonの公式サイトにアクセス</strong>
            <ul><li><a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></li></ul>
        </li>
        <li><strong>Python 3.11 または 3.12 をダウンロード</strong></li>
        <li><strong>インストーラーを実行</strong></li>
        <li><strong>重要：「Add Python to PATH」に必ずチェックを入れる</strong></li>
        <li><strong>「Install Now」をクリック</strong></li>
    </ol>

    <h4>方法B: Microsoft Storeからインストール</h4>
    <ol>
        <li><strong>Microsoft Storeを開く</strong></li>
        <li><strong>「Python 3.11」または「Python 3.12」を検索してインストール</strong></li>
    </ol>

    <div class="note">
        <p><strong>⚠️ 注意</strong>：この方法の場合、後述のコマンドで <code>python</code> の代わりに <code>python3</code> または <code>py</code> を使用</p>
    </div>

    <h3>ステップ2: アプリを配置</h3>

    <ol>
        <li><strong>ZIPファイルを解凍</strong>またはリポジトリをクローン</li>
        <li><strong>フォルダの中身を確認</strong>
<pre>dcs-obs-controller/
├── app.py              ← メインプログラム
├── config.json         ← 設定ファイル
├── requirements.txt    ← 必要なライブラリ一覧
└── templates/          ← 画面デザイン</pre>
        </li>
    </ol>

    <h3>ステップ3: 必要なライブラリをインストール</h3>

    <ol>
        <li><strong>コマンドプロンプトを開く</strong></li>
        <li><strong>フォルダに移動</strong>
<pre>cd C:\Users\あなたの名前\Desktop\dcs-obs-controller</pre>
        </li>
        <li><strong>ライブラリをインストール</strong></li>
    </ol>

    <p>公式サイト版の場合：</p>
<pre>pip install -r requirements.txt</pre>

    <p>Microsoft Store版の場合：</p>
<pre>pip3 install -r requirements.txt</pre>
    <p>または</p>
<pre>python -m pip install -r requirements.txt</pre>

    <h3>ステップ4: アプリを起動</h3>

    <p>公式サイト版の場合：</p>
<pre>python app.py</pre>

    <p>Microsoft Store版の場合：</p>
<pre>python3 app.py</pre>
    <p>または</p>
<pre>py app.py</pre>

    <p>起動成功の確認：</p>
<pre>==================================================
DCS/OBS Controller Server
==================================================
PC用設定画面: http://localhost:5000/pc
スマホ用画面: http://[PCのIP]:5000/
==================================================
[INFO] Using 'pynput' library
[INFO] Key controller initialized
 * Running on http://192.168.x.x:5000</pre>

    <div class="note">
        <p><strong>⚠️ Windowsファイアウォールの警告が出たら</strong>「アクセスを許可する」をクリック</p>
    </div>

    <h3>ステップ5: スマホから接続</h3>

    <ol>
        <li><strong>スマホのブラウザを開く</strong></li>
        <li><strong>アドレスバーに入力</strong>
<pre>http://192.168.x.x:5000</pre>
        </li>
        <li><strong>画面が表示されればOK！</strong></li>
    </ol>

    <h2>🌐 インターネット経由でアクセスする方法</h2>

    <h3>簡単な方法（特別な知識不要）</h3>

    <ol>
        <li><strong>ngrokをインストール</strong>
            <ul>
                <li><a href="https://ngrok.com/">https://ngrok.com/</a> にアクセス</li>
                <li>無料アカウントを作成（メールアドレスのみ）</li>
                <li>ngrokをダウンロード・解凍</li>
            </ul>
        </li>
        <li><strong>認証トークンを設定</strong>
            <ul>
                <li>アカウント作成後、表示される認証トークンをコピー</li>
                <li>コマンドプロンプトで以下を実行:
<pre>ngrok config add-authtoken あなたのトークン</pre>
                </li>
            </ul>
        </li>
        <li><strong>トンネルを作成</strong>
            <ul>
                <li>新しいコマンドプロンプトを開き、ngrokフォルダで:
<pre>ngrok http 5000</pre>
                </li>
            </ul>
        </li>
        <li><strong>外部URLを確認</strong>
            <ul>
                <li>表示された「Forwarding」のURLをメモ</li>
                <li>例: <code>https://abcd-123-456-789-012.ngrok.io</code></li>
            </ul>
        </li>
        <li><strong>スマホからアクセス</strong>
            <ul>
                <li>スマホのブラウザで上記URLを開く</li>
                <li>Wi-Fi接続や同一ネットワークは不要！</li>
            </ul>
        </li>
    </ol>

    <div class="note">
        <p>💡 <strong>便利なヒント</strong>: PCにngrokを起動したままにしておくと、どこからでもアクセス可能です</p>
    </div>

    <h3>一度設定したら簡単に起動できるバッチファイル</h3>

    <p>以下の内容で <code>start_with_ngrok.bat</code> を作成:</p>

<pre>@echo off
echo DCS/OBS Controller インターネット接続起動
echo =======================================
echo.

cd /d %~dp0
start cmd /k "python app.py"
echo サーバーを起動中... 少々お待ちください
timeout /t 3 > nul

echo.
echo インターネット接続を設定中...
echo.

cd "C:\Users\あなたの名前\Downloads\ngrok"
start ngrok http 5000

echo.
echo 設定完了！ ngrokの画面に表示されるURLからアクセスしてください
echo 例: https://abcd-123-456-789-012.ngrok.io
echo.
echo このウィンドウは閉じないでください
pause</pre>

    <p>このバッチファイルをダブルクリックすれば、自動的にアプリとngrokが起動します。</p>

    <h2>⚙️ 初期設定</h2>

    <h3>PCで設定画面を開く</h3>
<pre>http://localhost:5000/pc</pre>

    <h2>🎮 使い方マニュアル</h2>

    <h3>📝 ボタンの追加方法</h3>
    <ol>
        <li><strong>PC設定画面で「➕ ボタンを追加」をクリック</strong></li>
        <li><strong>情報を入力</strong>
            <ul>
                <li><strong>ボタン名</strong>: スマホに表示される名前（例：「ギア」「録画開始」）</li>
                <li><strong>キー</strong>: 押すキー（例：<code>g</code>、<code>F13</code>、<code>ctrl+s</code>）</li>
                <li><strong>色</strong>: ボタンの色（青/緑/橙/赤）</li>
            </ul>
        </li>
        <li><strong>「確定」をクリック</strong></li>
        <li><strong>「💾 設定を保存」をクリック</strong></li>
    </ol>

    <h3>🎨 タブ（モード）の使い方</h3>
    <ul>
        <li><strong>タブとは？</strong>: ゲームごとに違うボタン配置を保存できる機能</li>
        <li><strong>タブの追加</strong>: 「➕ タブを追加」→タブ名入力→ボタンを追加</li>
        <li><strong>タブの切り替え</strong>: 上部のタブをクリック/タップ</li>
        <li><strong>タブの編集・削除</strong>: タブ名の横の ✏️ で名前変更、🗑️ で削除</li>
    </ul>

    <h2>🎯 OBSと連携する方法</h2>

    <h3>1. OBSのホットキー設定</h3>
    <ol>
        <li><strong>OBSを起動</strong></li>
        <li><strong>「設定」→「ホットキー」を開く</strong></li>
        <li><strong>各機能にキーを割り当て</strong>
            <ul>
                <li>録画開始/停止: <code>F13</code></li>
                <li>配信開始/停止: <code>F14</code></li>
                <li>シーン1: <code>F15</code></li>
                <li>シーン2: <code>F16</code></li>
                <li>マイクミュート: <code>F17</code></li>
            </ul>
        </li>
        <li><strong>「適用」→「OK」をクリック</strong></li>
    </ol>

    <h3>2. アプリにボタンを追加</h3>
    <ol>
        <li><strong>PC設定画面を開く</strong></li>
        <li><strong>「➕ タブを追加」で「OBS制御」タブを作成</strong></li>
        <li><strong>ボタンを追加</strong>（例：録画開始/停止、キー：<code>F13</code>、色：赤）</li>
    </ol>

    <h3>3. スマホから操作</h3>
    <ul>
        <li><strong>OBSがバックグラウンドでも動作</strong></li>
        <li>ゲーム中でもスマホから録画開始/停止が可能</li>
    </ul>

    <h2>🔧 キーの指定方法</h2>

    <h3>基本のキー</h3>
<pre>a, b, c ... z        → アルファベット
0, 1, 2 ... 9        → 数字
space                → スペース
enter                → エンター
esc                  → エスケープ</pre>

    <h3>ファンクションキー</h3>
<pre>F1, F2 ... F24       → F1〜F24キー</pre>

    <h3>組み合わせキー（pynput対応）</h3>
<pre>ctrl+c               → Ctrl + C
shift+a              → Shift + A
alt+tab              → Alt + Tab
ctrl+shift+s         → Ctrl + Shift + S</pre>

    <h2>❓ トラブルシューティング</h2>

    <h3>コマンドエラー</h3>
    <ul>
        <li><strong>エラー</strong>: <code>py install -r requirements.txt</code> が動かない</li>
        <li><strong>正しいコマンド</strong>:
<pre>pip install -r requirements.txt</pre>
        または
<pre>python -m pip install -r requirements.txt</pre>
        </li>
    </ul>

    <h3>スマホから接続できない</h3>
    <ul>
        <li><strong>原因1</strong>: PCとスマホが違うWi-Fiに接続している → 同じWi-Fiに接続し直す</li>
        <li><strong>原因2</strong>: ファイアウォールがブロック → Pythonアプリにアクセス許可を与える</li>
        <li><strong>原因3</strong>: IPアドレスが間違っている → コマンドプロンプトで <code>ipconfig</code> を実行して確認</li>
    </ul>

    <h3>ngrokの問題</h3>
    <ul>
        <li><strong>エラー</strong>: 「トンネルセッションの有効期限が切れています」
            <ul>
                <li>ngrokの無料アカウントは2時間ごとに再起動が必要です</li>
                <li>コマンドプロンプトでngrokを再実行してください</li>
            </ul>
        </li>
        <li><strong>エラー</strong>: 「トンネルが見つかりません」
            <ul>
                <li>サーバーとngrokが両方起動していることを確認</li>
                <li>PCを再起動して両方のプログラムを再度起動</li>
            </ul>
        </li>
    </ul>

    <h3>ボタンを押しても反応しない</h3>
    <ul>
        <li><strong>原因1</strong>: キーの指定が間違っている → 大文字・小文字、スペースを確認</li>
        <li><strong>原因2</strong>: ゲームがキーを認識していない → ゲーム内のキー設定を確認</li>
        <li><strong>原因3</strong>: 管理者権限が必要 → PowerShellを管理者として実行してから起動</li>
    </ul>

    <h2>💡 便利な使い方</h2>

    <h3>自動起動の設定</h3>
    <ol>
        <li><strong>バッチファイルを作成</strong>（<code>start_controller.bat</code>）:
<pre>@echo off
cd C:\Users\あなたの名前\Desktop\dcs-obs-controller
python app.py
pause</pre>
        </li>
        <li><strong>ダブルクリックで起動</strong></li>
    </ol>

    <h3>スマホのホーム画面に追加</h3>
    <ul>
        <li><strong>iPhone</strong>: Safariでアプリを開く → 共有ボタン → 「ホーム画面に追加」</li>
        <li><strong>Android</strong>: Chromeでアプリを開く → メニュー → 「ホーム画面に追加」</li>
    </ul>

    <h2>📞 よくある質問</h2>

    <ul>
        <li><strong>Q</strong>: 複数のスマホから同時に接続できますか？<br>
            <strong>A</strong>: はい、できます。</li>
        <li><strong>Q</strong>: PCがスリープ状態でも動作しますか？<br>
            <strong>A</strong>: いいえ、PCが起動している必要があります。</li>
        <li><strong>Q</strong>: インターネット接続は必要ですか？<br>
            <strong>A</strong>: ローカル接続の場合は不要です。外部からアクセスする場合はインターネット接続が必要です。</li>
        <li><strong>Q</strong>: DCS World以外でも使えますか？<br>
            <strong>A</strong>: はい、任意のキーボード操作が可能なので、あらゆるゲームやアプリで使用できます。</li>
        <li><strong>Q</strong>: データ通信量はどれくらい使いますか？<br>
            <strong>A</strong>: 非常に少ないデータ量で動作します。長時間使用しても数MBほどです。</li>
    </ul>

    <hr>

    <h2>🎉 これで完了！</h2>

    <p>スマホからPCを自由に操作できるようになりました。</p>

    <p><strong>楽しいゲームライフを！ 🎮✨</strong></p>

    <p>DCS/OBS Controller - Version 1.1</p>
</body>
</html>