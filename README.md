# 📱 DCS/OBS Controller

DCS World等のゲームやOBSをスマホから遠隔操作するためのシンプルなWebアプリケーション

・標準的な使い方はDCS_OBS_Controller_Manual.htmlを参照してください。
・グローバル環境で使用する場合はセキュリティリスクを考慮したうえでglobal_access_guide.htmlを参照してください。

## 🎯 このアプリでできること

- **スマホがゲームパッドに変身**：DCS Worldなどのゲームをスマホから操作
- **OBSを遠隔操作**：録画開始/停止、シーン切替をスマホから
- **自由にカスタマイズ**：好きなボタンを好きな配置で作成可能

## 📋 必要なもの

### ✅ 準備するもの
- **Windows PC**（Windows 10/11）
- **スマホ**（iPhone/Android どちらでもOK）
- **同じWi-Fi**（PCとスマホが同じネットワークに接続）

### 📥 インストールが必要なもの
- **Python 3.10 ～ 3.12**（無料）
- **このアプリ**（ZIPファイルまたはgitクローン）

> ⚠️ **Python バージョンについて**
> - **推奨**: Python 3.10、3.11、3.12
> - **非推奨**: Python 3.14（最新すぎて一部ライブラリが未対応）

## 🚀 セットアップ手順

### ステップ1: Pythonをインストール

#### 方法A: 公式サイトからインストール（推奨）
1. **Pythonの公式サイトにアクセス**
   - [https://www.python.org/downloads/](https://www.python.org/downloads/)
2. **Python 3.11 または 3.12 をダウンロード**
3. **インストーラーを実行**
4. **重要：「Add Python to PATH」に必ずチェックを入れる**
5. **「Install Now」をクリック**

#### 方法B: Microsoft Storeからインストール
1. **Microsoft Storeを開く**
2. **「Python 3.11」または「Python 3.12」を検索してインストール**

> ⚠️ **注意**：この方法の場合、後述のコマンドで `python` の代わりに `python3` または `py` を使用

### ステップ2: アプリを配置

1. **ZIPファイルを解凍**またはリポジトリをクローン
2. **フォルダの中身を確認**
```
dcs-obs-controller/
├── app.py              ← メインプログラム
├── config.json         ← 設定ファイル
├── requirements.txt    ← 必要なライブラリ一覧
└── templates/          ← 画面デザイン
```

### ステップ3: 必要なライブラリをインストール

1. **コマンドプロンプトを開く**
2. **フォルダに移動**
```bash
cd C:\Users\あなたの名前\Desktop\dcs-obs-controller
```
3. **ライブラリをインストール**

公式サイト版の場合：
```bash
pip install -r requirements.txt
```

Microsoft Store版の場合：
```bash
pip3 install -r requirements.txt
```
または
```bash
python -m pip install -r requirements.txt
```

### ステップ4: アプリを起動

公式サイト版の場合：
```bash
python app.py
```

Microsoft Store版の場合：
```bash
python3 app.py
```
または
```bash
py app.py
```

起動成功の確認：
```
==================================================
DCS/OBS Controller Server
==================================================
PC用設定画面: http://localhost:5000/pc
スマホ用画面: http://[PCのIP]:5000/
==================================================
[INFO] Using 'pynput' library
[INFO] Key controller initialized
 * Running on http://192.168.x.x:5000
```

> ⚠️ **Windowsファイアウォールの警告が出たら**「アクセスを許可する」をクリック

### ステップ5: スマホから接続

1. **スマホのブラウザを開く**
2. **アドレスバーに入力**
```
http://192.168.x.x:5000
```
3. **画面が表示されればOK！**

## ⚙️ 初期設定

### PCで設定画面を開く
```
http://localhost:5000/pc
```

## 🎮 使い方マニュアル

### 📝 ボタンの追加方法
1. **PC設定画面で「➕ ボタンを追加」をクリック**
2. **情報を入力**
   - **ボタン名**: スマホに表示される名前（例：「ギア」「録画開始」）
   - **キー**: 押すキー（例：`g`、`F13`、`ctrl+s`）
   - **色**: ボタンの色（青/緑/橙/赤）
3. **「確定」をクリック**
4. **「💾 設定を保存」をクリック**

### 🎨 タブ（モード）の使い方
- **タブとは？**: ゲームごとに違うボタン配置を保存できる機能
- **タブの追加**: 「➕ タブを追加」→タブ名入力→ボタンを追加
- **タブの切り替え**: 上部のタブをクリック/タップ
- **タブの編集・削除**: タブ名の横の ✏️ で名前変更、🗑️ で削除

## 🎯 OBSと連携する方法

### 1. OBSのホットキー設定
1. **OBSを起動**
2. **「設定」→「ホットキー」を開く**
3. **各機能にキーを割り当て**
   - 録画開始/停止: `F13`
   - 配信開始/停止: `F14`
   - シーン1: `F15`
   - シーン2: `F16`
   - マイクミュート: `F17`
4. **「適用」→「OK」をクリック**

### 2. アプリにボタンを追加
1. **PC設定画面を開く**
2. **「➕ タブを追加」で「OBS制御」タブを作成**
3. **ボタンを追加**（例：録画開始/停止、キー：`F13`、色：赤）

### 3. スマホから操作
- **OBSがバックグラウンドでも動作**
- ゲーム中でもスマホから録画開始/停止が可能

## 🔧 キーの指定方法

### 基本のキー
```
a, b, c ... z        → アルファベット
0, 1, 2 ... 9        → 数字
space                → スペース
enter                → エンター
esc                  → エスケープ
```

### ファンクションキー
```
F1, F2 ... F24       → F1〜F24キー
```

### 組み合わせキー（pynput対応）
```
ctrl+c               → Ctrl + C
shift+a              → Shift + A
alt+tab              → Alt + Tab
ctrl+shift+s         → Ctrl + Shift + S
```

## ❓ トラブルシューティング

### コマンドエラー
- **エラー**: `py install -r requirements.txt` が動かない
- **正しいコマンド**:
  ```bash
  pip install -r requirements.txt
  ```
  または
  ```bash
  python -m pip install -r requirements.txt
  ```

### スマホから接続できない
- **原因1**: PCとスマホが違うWi-Fiに接続している → 同じWi-Fiに接続し直す
- **原因2**: ファイアウォールがブロック → Pythonアプリにアクセス許可を与える
- **原因3**: IPアドレスが間違っている → コマンドプロンプトで `ipconfig` を実行して確認

### ボタンを押しても反応しない
- **原因1**: キーの指定が間違っている → 大文字・小文字、スペースを確認
- **原因2**: ゲームがキーを認識していない → ゲーム内のキー設定を確認
- **原因3**: 管理者権限が必要 → PowerShellを管理者として実行してから起動

## 💡 便利な使い方

### 自動起動の設定
1. **バッチファイルを作成**（`start_controller.bat`）:
   ```batch
   @echo off
   cd C:\Users\あなたの名前\Desktop\dcs-obs-controller
   python app.py
   pause
   ```
2. **ダブルクリックで起動**

### スマホのホーム画面に追加
- **iPhone**: Safariでアプリを開く → 共有ボタン → 「ホーム画面に追加」
- **Android**: Chromeでアプリを開く → メニュー → 「ホーム画面に追加」

## 📞 よくある質問

- **Q**: 複数のスマホから同時に接続できますか？
  **A**: はい、できます。

- **Q**: PCがスリープ状態でも動作しますか？
  **A**: いいえ、PCが起動している必要があります。

- **Q**: インターネット接続は必要ですか？
  **A**: いいえ、同じWi-Fi内で動作します（オフラインOK）。

- **Q**: DCS World以外でも使えますか？
  **A**: はい、任意のキーボード操作が可能なので、あらゆるゲームやアプリで使用できます。

---

## 🎉 これで完了！

スマホからPCを自由に操作できるようになりました。

**楽しいゲームライフを！ 🎮✨**

DCS/OBS Controller - Version 1.1